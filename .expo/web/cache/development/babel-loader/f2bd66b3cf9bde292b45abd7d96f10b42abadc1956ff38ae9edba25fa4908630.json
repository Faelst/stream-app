{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Fade, Placeholder, PlaceholderLine, PlaceholderMedia } from \"rn-placeholder\";\nimport { Container, Thumbnail, ViewersCount, Info, Avatar, InfoText, Title, Streamer } from \"./styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport function UserFollowedStreamCard(_ref) {\n  var avatarUrl = _ref.avatarUrl,\n    streamer_login = _ref.streamer_login,\n    streamer_name = _ref.streamer_name,\n    thumbnailUrl = _ref.thumbnailUrl,\n    title = _ref.title,\n    viewersCount = _ref.viewersCount,\n    isLoadingUserFollowedStreams = _ref.isLoadingUserFollowedStreams;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoadingAvatar = _useState2[0],\n    setIsLoadingAvatar = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoadingThumbnail = _useState4[0],\n    setIsLoadingThumbnail = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    formattedViewersCount = _useState6[0],\n    setFormattedViewersCount = _useState6[1];\n  function prefetchImages() {\n    return _regeneratorRuntime.async(function prefetchImages$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(Image.prefetch(avatarUrl));\n        case 3:\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(Image.prefetch(thumbnailUrl.replace('{width}x{height}', '780x435')));\n        case 5:\n          setIsLoadingAvatar(false);\n          setIsLoadingThumbnail(false);\n          _context.next = 12;\n          break;\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context[\"catch\"](0);\n          Alert.alert('Erro imagem User Followed Streams');\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, null, null, [[0, 9]], Promise);\n  }\n  function formatViewersCount() {\n    if (viewersCount >= 1000) {\n      var formattedNumber = (viewersCount / 1000).toLocaleString('pt-BR', {\n        maximumFractionDigits: 1\n      });\n      var formattedWord = 'mil';\n      return setFormattedViewersCount(formattedNumber + \" \" + formattedWord);\n    }\n    setFormattedViewersCount(viewersCount.toString());\n  }\n  useEffect(function () {\n    if (!isLoadingUserFollowedStreams) {\n      prefetchImages();\n      formatViewersCount();\n    }\n  }, [isLoadingUserFollowedStreams, viewersCount]);\n  var thumbnailProps = {\n    source: {\n      uri: thumbnailUrl && thumbnailUrl.replace('{width}x{height}', '780x435')\n    }\n  };\n  return _jsxs(Container, {\n    activeOpacity: 0.5,\n    onPress: function onPress() {\n      return Linking.openURL(\"https://twitch.tv/\" + streamer_login);\n    },\n    children: [isLoadingThumbnail ? _jsx(Placeholder, {\n      Animation: Fade,\n      style: {\n        width: 260,\n        height: 145,\n        opacity: 0.2\n      },\n      children: _jsx(PlaceholderMedia, {\n        color: \"#828282\",\n        style: {\n          flex: 1,\n          width: '100%',\n          borderRadius: 10\n        }\n      })\n    }) : _jsx(Thumbnail, _objectSpread(_objectSpread({}, thumbnailProps), {}, {\n      children: _jsx(View, {\n        style: {\n          flex: 1,\n          padding: 12,\n          justifyContent: 'flex-end',\n          backgroundColor: 'rgba(0, 0, 0, 0.2)'\n        },\n        children: _jsxs(ViewersCount, {\n          children: [formattedViewersCount, \" espectadores\"]\n        })\n      })\n    })), _jsxs(Info, {\n      children: [isLoadingAvatar ? _jsx(Placeholder, {\n        Animation: Fade,\n        style: {\n          width: 40,\n          height: 40,\n          marginRight: 16,\n          opacity: 0.2\n        },\n        children: _jsx(PlaceholderMedia, {\n          color: \"#828282\",\n          style: {\n            flex: 1,\n            width: '100%',\n            borderRadius: 20\n          }\n        })\n      }) : _jsx(Avatar, {\n        source: {\n          uri: avatarUrl\n        }\n      }), _jsx(InfoText, {\n        children: isLoadingUserFollowedStreams ? _jsxs(Placeholder, {\n          Animation: Fade,\n          style: {\n            opacity: 0.2\n          },\n          children: [_jsx(PlaceholderLine, {\n            color: \"#828282\",\n            style: {\n              marginTop: 4,\n              marginBottom: 10\n            }\n          }), _jsx(PlaceholderLine, {\n            color: \"#828282\",\n            noMargin: true,\n            width: 20\n          })]\n        }) : _jsxs(_Fragment, {\n          children: [_jsx(Title, {\n            numberOfLines: 1,\n            children: title\n          }), _jsx(Streamer, {\n            children: streamer_name\n          })]\n        })\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","Alert","Linking","View","Image","Fade","Placeholder","PlaceholderLine","PlaceholderMedia","Container","Thumbnail","ViewersCount","Info","Avatar","InfoText","Title","Streamer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserFollowedStreamCard","_ref","avatarUrl","streamer_login","streamer_name","thumbnailUrl","title","viewersCount","isLoadingUserFollowedStreams","_useState","_useState2","_slicedToArray","isLoadingAvatar","setIsLoadingAvatar","_useState3","_useState4","isLoadingThumbnail","setIsLoadingThumbnail","_useState5","_useState6","formattedViewersCount","setFormattedViewersCount","prefetchImages","_regeneratorRuntime","async","prefetchImages$","_context","prev","next","awrap","prefetch","replace","t0","alert","stop","Promise","formatViewersCount","formattedNumber","toLocaleString","maximumFractionDigits","formattedWord","toString","thumbnailProps","source","uri","activeOpacity","onPress","openURL","children","Animation","style","width","height","opacity","color","flex","borderRadius","_objectSpread","padding","justifyContent","backgroundColor","marginRight","marginTop","marginBottom","noMargin","numberOfLines"],"sources":["/Users/fael_st/www/react-native/stream-app/src/components/UserFollowedStreamCard/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Alert, Linking, View, Image } from 'react-native';\nimport { Fade, Placeholder, PlaceholderLine, PlaceholderMedia } from \"rn-placeholder\";\n\nimport {\n  Container,\n  Thumbnail,\n  ViewersCount,\n  Info,\n  Avatar,\n  InfoText,\n  Title,\n  Streamer\n} from './styles';\n\ninterface UserFollowedStreamCardProps {\n  title: string;\n  streamer_login: string;\n  streamer_name: string;\n  thumbnailUrl: string;\n  avatarUrl: string;\n  viewersCount: number;\n  isLoadingUserFollowedStreams: boolean;\n}\n\nexport function UserFollowedStreamCard({ avatarUrl, streamer_login, streamer_name, thumbnailUrl, title, viewersCount, isLoadingUserFollowedStreams }: UserFollowedStreamCardProps) {\n  const [isLoadingAvatar, setIsLoadingAvatar] = useState(true);\n  const [isLoadingThumbnail, setIsLoadingThumbnail] = useState(true);\n  const [formattedViewersCount, setFormattedViewersCount] = useState('');\n\n  async function prefetchImages() {\n    try {\n      await Image.prefetch(avatarUrl);\n      await Image.prefetch(thumbnailUrl.replace('{width}x{height}', '780x435'));\n      \n      setIsLoadingAvatar(false);\n      setIsLoadingThumbnail(false);\n    } catch (error) {\n      Alert.alert('Erro imagem User Followed Streams');\n    }\n  }\n\n  function formatViewersCount() {   \n    if (viewersCount >= 1000) {\n      const formattedNumber = (viewersCount/1000).toLocaleString('pt-BR', { maximumFractionDigits: 1 });\n      const formattedWord = 'mil';\n\n      return setFormattedViewersCount(`${formattedNumber} ${formattedWord}`)\n    }\n\n    setFormattedViewersCount(viewersCount.toString());\n  }\n\n  useEffect(() => {\n    if (!isLoadingUserFollowedStreams) {\n      prefetchImages();\n      formatViewersCount();\n    }\n  }, [isLoadingUserFollowedStreams, viewersCount])\n\n  const thumbnailProps = {\n    source: {\n      uri: thumbnailUrl && thumbnailUrl.replace('{width}x{height}', '780x435')\n    }\n  }\n\n  return (\n    <Container activeOpacity={0.5} onPress={() => Linking.openURL(`https://twitch.tv/${streamer_login}`)}>\n      { isLoadingThumbnail ? (\n        <Placeholder\n          Animation={Fade}\n          style={{\n            width: 260,\n            height: 145,        \n            opacity: 0.2\n          }}\n        >\n          <PlaceholderMedia\n            color=\"#828282\"\n            style={{ \n              flex: 1, \n              width: '100%', \n              borderRadius: 10 \n            }}\n          />\n        </Placeholder>\n      ) : (\n        <Thumbnail {...thumbnailProps}>\n          <View style={{ flex: 1, padding: 12, justifyContent: 'flex-end', backgroundColor: 'rgba(0, 0, 0, 0.2)' }}>\n            <ViewersCount>{formattedViewersCount} espectadores</ViewersCount>\n          </View>\n        </Thumbnail>\n      )}\n\n      <Info>\n        { isLoadingAvatar ? (\n          <Placeholder\n            Animation={Fade}\n            style={{\n              width: 40,\n              height: 40,\n              marginRight: 16,\n              opacity: 0.2\n            }}\n          >\n            <PlaceholderMedia\n              color=\"#828282\"\n              style={{ \n                flex: 1, \n                width: '100%', \n                borderRadius: 20 \n              }}\n            />\n          </Placeholder>\n        ) : (\n          <Avatar source={{ uri: avatarUrl }} />\n        )}\n\n        <InfoText>\n          { isLoadingUserFollowedStreams ? (\n            <Placeholder\n              Animation={Fade}\n              style={{\n                opacity: 0.2\n              }}\n            >\n              <PlaceholderLine color=\"#828282\" style={{ marginTop: 4, marginBottom: 10 }} />\n              <PlaceholderLine color=\"#828282\" noMargin width={20} />\n            </Placeholder>\n          ) : (\n            <>\n              <Title numberOfLines={1}>{title}</Title>\n              <Streamer>{streamer_name}</Streamer>\n            </>\n          )}\n        </InfoText>\n      </Info>\n    </Container>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}